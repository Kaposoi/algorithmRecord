# 协议分层

为了给网络协议的设计提供一个结构， 网络设计者以**分层**的方式组织**协议**以及**实现这些协议的网络硬件和软件**

每个协议属于这些层次之一



一层的**服务模型**是某层向它的上一层提供的服务

每层通过在该层中执行某些动作或使用下层提供的服务来提供服务



### 协议栈

各层的**所有协议**称为**协议栈**

因特网的协议栈由**物理层， 链路层， 网络层， 运输层和应用层**组成



<p><strong style="color: #ff0000">下层为上层提供服务， 上层向下层注入数据</strong></p>

### 应用层

应用层是网络应用程序和它们的应用层协议存留的地方。 

因特网的应用层包括许多协议， 例如HTTP(它提供了web文档的请求和传输)， SMTP(它提供了电子邮件报文的传输)， FTP(它提供两个端系统之间的文件传送)



应用层协议分布在多个端系统上， 一个端系统中的应用程序使用协议与另一个端系统中的应用程序交换信息的分组。 我们把这种位于应用层的信息分组称为**报文(message)**



### 传输层

因特网的传输层在应用程序端点之间传送应用层报文， 这便是传输层向应用层提供的服务

><p style="color: #ff0000"><strong>服务就是在应用程序端点之间传送应用层报文</strong></p>

有两个运输协议， TCP和UDP， 其中的任意一个都可以传输应用层的报文



TCP向它的应用程序提供了面向连接的服务， 这种服务包括了应用层报文向目的地的**确保传递**和**流量控制**(发送方/接收方速率匹配)



TCP也将长报文划分为短报文， 并提供拥塞控制机制， 因此当网络拥塞时， 源抑制其传输效率。 



udp协议向它的应用程序提供无链接服务， 不提供不必要的服务， 没有可靠性和流量控制， 也没有拥塞控制



运输层分组称为**报文段**



### 网络层

因特网的网络层负责将称为**数据报(datagram)**的网络层分组从一台主机移动到另一台主机， 

在一台源主机的因特网运输层协议(TCP或UDP)向网络层递交**运输层报文段**和**目的地址**， 如同寄信时提供一个目的地址



网络层包含了IP协议和路由选择协议等

路由选择协议有许多， 网络管理者可以运行任何希望的路由选择协议



### 链路层

为了将分组从一个结点(主机或路由器)运送到下一个结点， 网络层必须依靠链路层的服务， 特别是在每个结点， 网络层将数据下报给链路层， 链路层沿着路径将数据报传递给下一个结点， 在下一个结点， 链路层将数据报上给网络层， 提供的服务取决于应用于该链路的特定链路层协议



链路层的分组称为**帧(frame)**



### 物理层

链路层的任务是将整个帧从一个网络元素移动到邻近的网络元素， 物理层的任务是将该帧的一个一个比特从一个结点移动到下一个结点。 这层的协议和该链路的实际传输媒体相关



## 分层结构的体系结构-OSI模型

**开放系统互连(OSI)模型**



分为七层:

**应用层， 表示层， 会话层， 运输层， 网络层， 链路层， 物理层**



### 表示层

表示层的作用是让通信的应用程序可以解释交换数据的含义



### 会话层

会话层提供了数据交换定界和同步功能， 包括建立检查点和恢复方案的办法



### 封装

应用层报文->运输层报文段->网络层数据报->链路层帧

一个分组具有两种类型的字段， 首部字段和**有效载荷字段**

有效载荷字段通常是来自上一层的分组