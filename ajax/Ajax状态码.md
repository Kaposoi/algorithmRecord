# Ajax状态码

在创建ajax对象，配置ajax对象，发送请求以及接受完服务器响应数据，这个过程中的每一个步骤都会对应一个数值，这个数值就是ajax状态码。

有0 1 2 3 4



0: 请求未初始化，没调用open

1 请求已经建立，但是没发送（还没调用send）

2 请求已经发送

3 请求正在处理中，通常响应有部分数据可以用了

4 响应已经完成，可以获取并使用了

xhr.readyState 获取ajax状态码



获取服务端的响应

onreadystatechange 事件

当状态码发生变化时触发该事件。

这个事件的监听应该在send之前。

响应数据也可以监听onreadystatechange事件。

此事件兼容ie低版本，但是需要多次调用。



ajax错误处理

>1.网络畅通，服务器端能接受到请求，服务器端返回的结果不是预期结果
>
>可以判断服务器返回的http状态码，分别进行处理，用xhr.status。
>
>2.网络畅通，服务器端报404
>
>检查地址是否错误。
>
>3.网络畅通，服务器端能接受到请求，返回500
>
>找后端程序员，捶他一顿，叫他改好
>
>4.断网的情况，断网会触发onerror事件
>
>监听一下onerror事件。

