# 进程 线程 协程

## 进程

- 进程之间不会共享任何状态(全局变量等)， 实际上， 每个进程都会拿到一份完整代码， 然后在各自的内存区域运行它
- 调度由操作系统完成
- 有独立的内存空间(切换时需要保存栈， cpu寄存器， 虚拟内存， 以及打开的相关句柄等信息， 开销大)
- 通讯主要通过信号传递的方式(进程间通信)



## 线程

- 线程之间共享变量(解决了通信麻烦的问题， 但是对于变量的访问需要加锁)
- 调度由操作系统完成(由于共享内存， 上下文切换变得高效)
- 一个进程可以拥有多个线程， 每个线程都会共享父进程的资源(创建线程的开销比创建进程小很多， 可创建的数量也会多很多)
- 通讯除了可使用进程间通讯的方式， 还可以使用共享内存的方式进行通信(通过共享内存通信比通过内核快很多)



## 协程

- 调度完全由用户控制
- 一个线程或者是一个进程可以拥有多个协程
- 每个线程或者是每个进程循环按照指定的任务清单顺序完成不同的任务(当任务被堵塞时， 执行下一个任务， 当恢复时， 再回来执行这个任务； 任务间切换只需要保存任务的上下文， 没有内核的开销， 可以不加锁访问全局变量)
- 协程需要保证是非阻塞的， 并且没有互相依赖
- 基本上不可同步通讯， 多采取异步通讯